{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":50,"index":95}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"../lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":43,"index":139}}],"key":"phU7YuntQKgoAYKWKHVlsIL7LCY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useAdminRole = useAdminRole;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _contextsAuthContext = require(_dependencyMap[1], \"../contexts/AuthContext\");\n  var _libSupabase = require(_dependencyMap[2], \"../lib/supabase\");\n  const ROLE_HIERARCHY = {\n    head_admin: 4,\n    admin: 3,\n    moderator: 2,\n    support: 1\n  };\n  const ROLE_PERMISSIONS = {\n    head_admin: {\n      canManageAdmins: true,\n      canBanUsers: true,\n      canDeleteContent: true,\n      canViewReports: true,\n      canResolveReports: true,\n      canViewAnalytics: true,\n      canManageVIP: true,\n      canSendWarnings: true,\n      canViewLogs: true\n    },\n    admin: {\n      canManageAdmins: false,\n      canBanUsers: true,\n      canDeleteContent: true,\n      canViewReports: true,\n      canResolveReports: true,\n      canViewAnalytics: true,\n      canManageVIP: false,\n      canSendWarnings: true,\n      canViewLogs: true\n    },\n    moderator: {\n      canManageAdmins: false,\n      canBanUsers: false,\n      canDeleteContent: true,\n      canViewReports: true,\n      canResolveReports: true,\n      canViewAnalytics: false,\n      canManageVIP: false,\n      canSendWarnings: true,\n      canViewLogs: false\n    },\n    support: {\n      canManageAdmins: false,\n      canBanUsers: false,\n      canDeleteContent: false,\n      canViewReports: true,\n      canResolveReports: false,\n      canViewAnalytics: false,\n      canManageVIP: false,\n      canSendWarnings: false,\n      canViewLogs: false\n    }\n  };\n  function useAdminRole() {\n    _s();\n    const {\n      user\n    } = (0, _contextsAuthContext.useAuth)();\n    const [role, setRole] = (0, _react.useState)(null);\n    const [permissions, setPermissions] = (0, _react.useState)({\n      canManageAdmins: false,\n      canBanUsers: false,\n      canDeleteContent: false,\n      canViewReports: false,\n      canResolveReports: false,\n      canViewAnalytics: false,\n      canManageVIP: false,\n      canSendWarnings: false,\n      canViewLogs: false\n    });\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadAdminRole();\n    }, [user?.id]);\n    const loadAdminRole = async () => {\n      if (!user?.id) {\n        setRole(null);\n        setLoading(false);\n        return;\n      }\n      try {\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.from('admin_roles').select('role, is_active').eq('user_id', user.id).eq('is_active', true).single();\n        if (error || !data) {\n          setRole(null);\n          setPermissions(ROLE_PERMISSIONS.support);\n        } else {\n          const adminRole = data.role;\n          setRole(adminRole);\n          setPermissions(ROLE_PERMISSIONS[adminRole] || ROLE_PERMISSIONS.support);\n        }\n      } catch (error) {\n        console.error('Error loading admin role:', error);\n        setRole(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const hasRole = requiredRole => {\n      if (!role || !requiredRole) return false;\n      return ROLE_HIERARCHY[role] >= ROLE_HIERARCHY[requiredRole];\n    };\n    const isAdmin = () => {\n      return role !== null;\n    };\n    return {\n      role,\n      permissions,\n      loading,\n      hasRole,\n      isAdmin,\n      refreshRole: loadAdminRole\n    };\n  }\n  _s(useAdminRole, \"VZPVZ4CX6R1EwmPkvasDNORCN7w=\", false, function () {\n    return [_contextsAuthContext.useAuth];\n  });\n});","lineCount":130,"map":[[8,2,73,0,"exports"],[8,9,73,0],[8,10,73,0,"useAdminRole"],[8,22,73,0],[8,25,73,0,"useAdminRole"],[8,37,73,0],[9,2,1,0],[9,6,1,0,"_react"],[9,12,1,0],[9,15,1,0,"require"],[9,22,1,0],[9,23,1,0,"_dependencyMap"],[9,37,1,0],[10,2,2,0],[10,6,2,0,"_contextsAuthContext"],[10,26,2,0],[10,29,2,0,"require"],[10,36,2,0],[10,37,2,0,"_dependencyMap"],[10,51,2,0],[11,2,3,0],[11,6,3,0,"_libSupabase"],[11,18,3,0],[11,21,3,0,"require"],[11,28,3,0],[11,29,3,0,"_dependencyMap"],[11,43,3,0],[12,2,19,0],[12,8,19,6,"ROLE_HIERARCHY"],[12,22,19,56],[12,25,19,59],[13,4,20,2,"head_admin"],[13,14,20,12],[13,16,20,14],[13,17,20,15],[14,4,21,2,"admin"],[14,9,21,7],[14,11,21,9],[14,12,21,10],[15,4,22,2,"moderator"],[15,13,22,11],[15,15,22,13],[15,16,22,14],[16,4,23,2,"support"],[16,11,23,9],[16,13,23,11],[17,2,24,0],[17,3,24,1],[18,2,26,0],[18,8,26,6,"ROLE_PERMISSIONS"],[18,24,26,68],[18,27,26,71],[19,4,27,2,"head_admin"],[19,14,27,12],[19,16,27,14],[20,6,28,4,"canManageAdmins"],[20,21,28,19],[20,23,28,21],[20,27,28,25],[21,6,29,4,"canBanUsers"],[21,17,29,15],[21,19,29,17],[21,23,29,21],[22,6,30,4,"canDeleteContent"],[22,22,30,20],[22,24,30,22],[22,28,30,26],[23,6,31,4,"canViewReports"],[23,20,31,18],[23,22,31,20],[23,26,31,24],[24,6,32,4,"canResolveReports"],[24,23,32,21],[24,25,32,23],[24,29,32,27],[25,6,33,4,"canViewAnalytics"],[25,22,33,20],[25,24,33,22],[25,28,33,26],[26,6,34,4,"canManageVIP"],[26,18,34,16],[26,20,34,18],[26,24,34,22],[27,6,35,4,"canSendWarnings"],[27,21,35,19],[27,23,35,21],[27,27,35,25],[28,6,36,4,"canViewLogs"],[28,17,36,15],[28,19,36,17],[29,4,37,2],[29,5,37,3],[30,4,38,2,"admin"],[30,9,38,7],[30,11,38,9],[31,6,39,4,"canManageAdmins"],[31,21,39,19],[31,23,39,21],[31,28,39,26],[32,6,40,4,"canBanUsers"],[32,17,40,15],[32,19,40,17],[32,23,40,21],[33,6,41,4,"canDeleteContent"],[33,22,41,20],[33,24,41,22],[33,28,41,26],[34,6,42,4,"canViewReports"],[34,20,42,18],[34,22,42,20],[34,26,42,24],[35,6,43,4,"canResolveReports"],[35,23,43,21],[35,25,43,23],[35,29,43,27],[36,6,44,4,"canViewAnalytics"],[36,22,44,20],[36,24,44,22],[36,28,44,26],[37,6,45,4,"canManageVIP"],[37,18,45,16],[37,20,45,18],[37,25,45,23],[38,6,46,4,"canSendWarnings"],[38,21,46,19],[38,23,46,21],[38,27,46,25],[39,6,47,4,"canViewLogs"],[39,17,47,15],[39,19,47,17],[40,4,48,2],[40,5,48,3],[41,4,49,2,"moderator"],[41,13,49,11],[41,15,49,13],[42,6,50,4,"canManageAdmins"],[42,21,50,19],[42,23,50,21],[42,28,50,26],[43,6,51,4,"canBanUsers"],[43,17,51,15],[43,19,51,17],[43,24,51,22],[44,6,52,4,"canDeleteContent"],[44,22,52,20],[44,24,52,22],[44,28,52,26],[45,6,53,4,"canViewReports"],[45,20,53,18],[45,22,53,20],[45,26,53,24],[46,6,54,4,"canResolveReports"],[46,23,54,21],[46,25,54,23],[46,29,54,27],[47,6,55,4,"canViewAnalytics"],[47,22,55,20],[47,24,55,22],[47,29,55,27],[48,6,56,4,"canManageVIP"],[48,18,56,16],[48,20,56,18],[48,25,56,23],[49,6,57,4,"canSendWarnings"],[49,21,57,19],[49,23,57,21],[49,27,57,25],[50,6,58,4,"canViewLogs"],[50,17,58,15],[50,19,58,17],[51,4,59,2],[51,5,59,3],[52,4,60,2,"support"],[52,11,60,9],[52,13,60,11],[53,6,61,4,"canManageAdmins"],[53,21,61,19],[53,23,61,21],[53,28,61,26],[54,6,62,4,"canBanUsers"],[54,17,62,15],[54,19,62,17],[54,24,62,22],[55,6,63,4,"canDeleteContent"],[55,22,63,20],[55,24,63,22],[55,29,63,27],[56,6,64,4,"canViewReports"],[56,20,64,18],[56,22,64,20],[56,26,64,24],[57,6,65,4,"canResolveReports"],[57,23,65,21],[57,25,65,23],[57,30,65,28],[58,6,66,4,"canViewAnalytics"],[58,22,66,20],[58,24,66,22],[58,29,66,27],[59,6,67,4,"canManageVIP"],[59,18,67,16],[59,20,67,18],[59,25,67,23],[60,6,68,4,"canSendWarnings"],[60,21,68,19],[60,23,68,21],[60,28,68,26],[61,6,69,4,"canViewLogs"],[61,17,69,15],[61,19,69,17],[62,4,70,2],[63,2,71,0],[63,3,71,1],[64,2,73,7],[64,11,73,16,"useAdminRole"],[64,23,73,28,"useAdminRole"],[64,24,73,28],[64,26,73,31],[65,4,73,31,"_s"],[65,6,73,31],[66,4,74,2],[66,10,74,8],[67,6,74,10,"user"],[68,4,74,15],[68,5,74,16],[68,8,74,19],[68,12,74,19,"useAuth"],[68,32,74,26],[68,33,74,26,"useAuth"],[68,40,74,26],[68,42,74,27],[68,43,74,28],[69,4,75,2],[69,10,75,8],[69,11,75,9,"role"],[69,15,75,13],[69,17,75,15,"setRole"],[69,24,75,22],[69,25,75,23],[69,28,75,26],[69,32,75,26,"useState"],[69,38,75,34],[69,39,75,34,"useState"],[69,47,75,34],[69,49,75,46],[69,53,75,50],[69,54,75,51],[70,4,76,2],[70,10,76,8],[70,11,76,9,"permissions"],[70,22,76,20],[70,24,76,22,"setPermissions"],[70,38,76,36],[70,39,76,37],[70,42,76,40],[70,46,76,40,"useState"],[70,52,76,48],[70,53,76,48,"useState"],[70,61,76,48],[70,63,76,67],[71,6,77,4,"canManageAdmins"],[71,21,77,19],[71,23,77,21],[71,28,77,26],[72,6,78,4,"canBanUsers"],[72,17,78,15],[72,19,78,17],[72,24,78,22],[73,6,79,4,"canDeleteContent"],[73,22,79,20],[73,24,79,22],[73,29,79,27],[74,6,80,4,"canViewReports"],[74,20,80,18],[74,22,80,20],[74,27,80,25],[75,6,81,4,"canResolveReports"],[75,23,81,21],[75,25,81,23],[75,30,81,28],[76,6,82,4,"canViewAnalytics"],[76,22,82,20],[76,24,82,22],[76,29,82,27],[77,6,83,4,"canManageVIP"],[77,18,83,16],[77,20,83,18],[77,25,83,23],[78,6,84,4,"canSendWarnings"],[78,21,84,19],[78,23,84,21],[78,28,84,26],[79,6,85,4,"canViewLogs"],[79,17,85,15],[79,19,85,17],[80,4,86,2],[80,5,86,3],[80,6,86,4],[81,4,87,2],[81,10,87,8],[81,11,87,9,"loading"],[81,18,87,16],[81,20,87,18,"setLoading"],[81,30,87,28],[81,31,87,29],[81,34,87,32],[81,38,87,32,"useState"],[81,44,87,40],[81,45,87,40,"useState"],[81,53,87,40],[81,55,87,41],[81,59,87,45],[81,60,87,46],[82,4,89,2],[82,8,89,2,"useEffect"],[82,14,89,11],[82,15,89,11,"useEffect"],[82,24,89,11],[82,26,89,12],[82,32,89,18],[83,6,90,4,"loadAdminRole"],[83,19,90,17],[83,20,90,18],[83,21,90,19],[84,4,91,2],[84,5,91,3],[84,7,91,5],[84,8,91,6,"user"],[84,12,91,10],[84,14,91,12,"id"],[84,16,91,14],[84,17,91,15],[84,18,91,16],[85,4,93,2],[85,10,93,8,"loadAdminRole"],[85,23,93,21],[85,26,93,24],[85,32,93,24,"loadAdminRole"],[85,33,93,24],[85,38,93,36],[86,6,94,4],[86,10,94,8],[86,11,94,9,"user"],[86,15,94,13],[86,17,94,15,"id"],[86,19,94,17],[86,21,94,19],[87,8,95,6,"setRole"],[87,15,95,13],[87,16,95,14],[87,20,95,18],[87,21,95,19],[88,8,96,6,"setLoading"],[88,18,96,16],[88,19,96,17],[88,24,96,22],[88,25,96,23],[89,8,97,6],[90,6,98,4],[91,6,100,4],[91,10,100,8],[92,8,101,6],[92,14,101,12],[93,10,101,14,"data"],[93,14,101,18],[94,10,101,20,"error"],[95,8,101,26],[95,9,101,27],[95,12,101,30],[95,18,101,36,"supabase"],[95,30,101,44],[95,31,101,44,"supabase"],[95,39,101,44],[95,40,102,9,"from"],[95,44,102,13],[95,45,102,14],[95,58,102,27],[95,59,102,28],[95,60,103,9,"select"],[95,66,103,15],[95,67,103,16],[95,84,103,33],[95,85,103,34],[95,86,104,9,"eq"],[95,88,104,11],[95,89,104,12],[95,98,104,21],[95,100,104,23,"user"],[95,104,104,27],[95,105,104,28,"id"],[95,107,104,30],[95,108,104,31],[95,109,105,9,"eq"],[95,111,105,11],[95,112,105,12],[95,123,105,23],[95,125,105,25],[95,129,105,29],[95,130,105,30],[95,131,106,9,"single"],[95,137,106,15],[95,138,106,16],[95,139,106,17],[96,8,108,6],[96,12,108,10,"error"],[96,17,108,15],[96,21,108,19],[96,22,108,20,"data"],[96,26,108,24],[96,28,108,26],[97,10,109,8,"setRole"],[97,17,109,15],[97,18,109,16],[97,22,109,20],[97,23,109,21],[98,10,110,8,"setPermissions"],[98,24,110,22],[98,25,110,23,"ROLE_PERMISSIONS"],[98,41,110,39],[98,42,110,40,"support"],[98,49,110,47],[98,50,110,48],[99,8,111,6],[99,9,111,7],[99,15,111,13],[100,10,112,8],[100,16,112,14,"adminRole"],[100,25,112,23],[100,28,112,26,"data"],[100,32,112,30],[100,33,112,31,"role"],[100,37,112,48],[101,10,113,8,"setRole"],[101,17,113,15],[101,18,113,16,"adminRole"],[101,27,113,25],[101,28,113,26],[102,10,114,8,"setPermissions"],[102,24,114,22],[102,25,114,23,"ROLE_PERMISSIONS"],[102,41,114,39],[102,42,114,40,"adminRole"],[102,51,114,49],[102,52,114,50],[102,56,114,54,"ROLE_PERMISSIONS"],[102,72,114,70],[102,73,114,71,"support"],[102,80,114,78],[102,81,114,79],[103,8,115,6],[104,6,116,4],[104,7,116,5],[104,8,116,6],[104,15,116,13,"error"],[104,20,116,18],[104,22,116,20],[105,8,117,6,"console"],[105,15,117,13],[105,16,117,14,"error"],[105,21,117,19],[105,22,117,20],[105,49,117,47],[105,51,117,49,"error"],[105,56,117,54],[105,57,117,55],[106,8,118,6,"setRole"],[106,15,118,13],[106,16,118,14],[106,20,118,18],[106,21,118,19],[107,6,119,4],[107,7,119,5],[107,16,119,14],[108,8,120,6,"setLoading"],[108,18,120,16],[108,19,120,17],[108,24,120,22],[108,25,120,23],[109,6,121,4],[110,4,122,2],[110,5,122,3],[111,4,124,2],[111,10,124,8,"hasRole"],[111,17,124,15],[111,20,124,19,"requiredRole"],[111,32,124,42],[111,36,124,56],[112,6,125,4],[112,10,125,8],[112,11,125,9,"role"],[112,15,125,13],[112,19,125,17],[112,20,125,18,"requiredRole"],[112,32,125,30],[112,34,125,32],[112,41,125,39],[112,46,125,44],[113,6,126,4],[113,13,126,11,"ROLE_HIERARCHY"],[113,27,126,25],[113,28,126,26,"role"],[113,32,126,30],[113,33,126,31],[113,37,126,35,"ROLE_HIERARCHY"],[113,51,126,49],[113,52,126,50,"requiredRole"],[113,64,126,62],[113,65,126,63],[114,4,127,2],[114,5,127,3],[115,4,129,2],[115,10,129,8,"isAdmin"],[115,17,129,15],[115,20,129,18,"isAdmin"],[115,21,129,18],[115,26,129,33],[116,6,130,4],[116,13,130,11,"role"],[116,17,130,15],[116,22,130,20],[116,26,130,24],[117,4,131,2],[117,5,131,3],[118,4,133,2],[118,11,133,9],[119,6,134,4,"role"],[119,10,134,8],[120,6,135,4,"permissions"],[120,17,135,15],[121,6,136,4,"loading"],[121,13,136,11],[122,6,137,4,"hasRole"],[122,13,137,11],[123,6,138,4,"isAdmin"],[123,13,138,11],[124,6,139,4,"refreshRole"],[124,17,139,15],[124,19,139,17,"loadAdminRole"],[125,4,140,2],[125,5,140,3],[126,2,141,0],[127,2,141,1,"_s"],[127,4,141,1],[127,5,73,16,"useAdminRole"],[127,17,73,28],[128,4,73,28],[128,12,74,19,"useAuth"],[128,32,74,26],[128,33,74,26,"useAuth"],[128,40,74,26],[129,2,74,26],[130,0,74,26],[130,3]],"functionMap":{"names":["<global>","useAdminRole","useEffect$argument_0","loadAdminRole","hasRole","isAdmin"],"mappings":"AAA;OCwE;YCgB;GDE;wBEE;GF6B;kBGE;GHG;kBIE;GJE;CDU"},"hasCjsExports":false},"type":"js/module"}]}