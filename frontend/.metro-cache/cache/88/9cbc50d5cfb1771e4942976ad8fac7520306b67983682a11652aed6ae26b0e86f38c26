{"dependencies":[{"name":"../lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"phU7YuntQKgoAYKWKHVlsIL7LCY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"battleService\", {\n    enumerable: true,\n    get: function () {\n      return battleService;\n    }\n  });\n  var _libSupabase = require(_dependencyMap[0], \"../lib/supabase\");\n  const battleService = {\n    /**\n     * Cast a vote for a team in a battle\n     */\n    async castVote(matchId, voterId, team) {\n      try {\n        // Check if user has already voted\n        const {\n          data: existingVote\n        } = await _libSupabase.supabase.from('battle_votes').select('id').eq('match_id', matchId).eq('voter_id', voterId).single();\n        if (existingVote) {\n          // Update existing vote\n          const {\n            error\n          } = await _libSupabase.supabase.from('battle_votes').update({\n            team,\n            updated_at: new Date().toISOString()\n          }).eq('id', existingVote.id);\n          if (error) throw error;\n        } else {\n          // Insert new vote\n          const {\n            error\n          } = await _libSupabase.supabase.from('battle_votes').insert({\n            match_id: matchId,\n            voter_id: voterId,\n            team\n          });\n          if (error) throw error;\n        }\n        return {\n          success: true\n        };\n      } catch (error) {\n        console.error('Cast vote error:', error);\n        return {\n          success: false,\n          error: error.message || 'Failed to cast vote'\n        };\n      }\n    },\n    /**\n     * Get current vote counts for a battle\n     */\n    async getVoteCounts(matchId) {\n      try {\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.from('battle_votes').select('team').eq('match_id', matchId);\n        if (error) throw error;\n        const teamAVotes = data?.filter(v => v.team === 'team_a').length || 0;\n        const teamBVotes = data?.filter(v => v.team === 'team_b').length || 0;\n        const total = teamAVotes + teamBVotes;\n        return {\n          team_a: teamAVotes,\n          team_b: teamBVotes,\n          total,\n          percentage: {\n            team_a: total > 0 ? teamAVotes / total * 100 : 50,\n            team_b: total > 0 ? teamBVotes / total * 100 : 50\n          }\n        };\n      } catch (error) {\n        console.error('Get vote counts error:', error);\n        return {\n          team_a: 0,\n          team_b: 0,\n          total: 0,\n          percentage: {\n            team_a: 50,\n            team_b: 50\n          }\n        };\n      }\n    },\n    /**\n     * Check if a user has voted\n     */\n    async getUserVote(matchId, userId) {\n      try {\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.from('battle_votes').select('team').eq('match_id', matchId).eq('voter_id', userId).single();\n        if (error || !data) return null;\n        return data.team;\n      } catch (error) {\n        console.error('Get user vote error:', error);\n        return null;\n      }\n    },\n    /**\n     * End a battle and calculate results\n     */\n    async endBattle(matchId) {\n      try {\n        // Get vote counts\n        const voteCounts = await this.getVoteCounts(matchId);\n\n        // Determine winner\n        let winnerTeam;\n        if (voteCounts.team_a > voteCounts.team_b) {\n          winnerTeam = 'team_a';\n        } else if (voteCounts.team_b > voteCounts.team_a) {\n          winnerTeam = 'team_b';\n        } else {\n          winnerTeam = 'tie';\n        }\n\n        // Save results\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.from('battle_results').insert({\n          match_id: matchId,\n          winner_team: winnerTeam,\n          team_a_votes: voteCounts.team_a,\n          team_b_votes: voteCounts.team_b,\n          total_votes: voteCounts.total\n        }).select().single();\n        if (error) throw error;\n\n        // Update match status to completed\n        await _libSupabase.supabase.from('battle_matches').update({\n          status: 'completed',\n          ended_at: new Date().toISOString()\n        }).eq('id', matchId);\n\n        // Update participant stats\n        await this.updateParticipantStats(matchId, winnerTeam);\n        return {\n          success: true,\n          result: data\n        };\n      } catch (error) {\n        console.error('End battle error:', error);\n        return {\n          success: false\n        };\n      }\n    },\n    /**\n     * Get battle results\n     */\n    async getBattleResults(matchId) {\n      try {\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.from('battle_results').select('*').eq('match_id', matchId).single();\n        if (error || !data) return null;\n        return data;\n      } catch (error) {\n        console.error('Get battle results error:', error);\n        return null;\n      }\n    },\n    /**\n     * Update participant statistics after battle\n     */\n    async updateParticipantStats(matchId, winnerTeam) {\n      try {\n        // Get participants\n        const {\n          data: participants\n        } = await _libSupabase.supabase.from('battle_participants').select('user_id, team').eq('match_id', matchId);\n        if (!participants) return;\n\n        // Update stats for each participant\n        for (const participant of participants) {\n          const isWinner = winnerTeam === participant.team || winnerTeam === 'tie' && (participant.team === 'team_a' || participant.team === 'team_b');\n\n          // Get current stats\n          const {\n            data: profile\n          } = await _libSupabase.supabase.from('profiles').select('battles_won, battles_lost, battles_tied, total_battles').eq('id', participant.user_id).single();\n          if (profile) {\n            const updates = {\n              total_battles: (profile.total_battles || 0) + 1\n            };\n            if (winnerTeam === 'tie') {\n              updates.battles_tied = (profile.battles_tied || 0) + 1;\n            } else if (isWinner) {\n              updates.battles_won = (profile.battles_won || 0) + 1;\n            } else {\n              updates.battles_lost = (profile.battles_lost || 0) + 1;\n            }\n            await _libSupabase.supabase.from('profiles').update(updates).eq('id', participant.user_id);\n          }\n        }\n      } catch (error) {\n        console.error('Update participant stats error:', error);\n      }\n    },\n    /**\n     * Subscribe to vote changes in real-time\n     */\n    subscribeToVotes(matchId, callback) {\n      const channel = _libSupabase.supabase.channel(`battle-votes:${matchId}`).on('postgres_changes', {\n        event: '*',\n        schema: 'public',\n        table: 'battle_votes',\n        filter: `match_id=eq.${matchId}`\n      }, async () => {\n        // Reload vote counts when any vote changes\n        const counts = await this.getVoteCounts(matchId);\n        callback(counts);\n      }).subscribe();\n      return () => {\n        _libSupabase.supabase.removeChannel(channel);\n      };\n    },\n    /**\n     * Subscribe to battle result\n     */\n    subscribeToResult(matchId, callback) {\n      const channel = _libSupabase.supabase.channel(`battle-result:${matchId}`).on('postgres_changes', {\n        event: 'INSERT',\n        schema: 'public',\n        table: 'battle_results',\n        filter: `match_id=eq.${matchId}`\n      }, payload => {\n        callback(payload.new);\n      }).subscribe();\n      return () => {\n        _libSupabase.supabase.removeChannel(channel);\n      };\n    },\n    /**\n     * Get battle history for a user\n     */\n    async getUserBattleHistory(userId, limit = 20) {\n      try {\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.from('battle_results').select(`\n          *,\n          match:battle_matches(\n            *,\n            participants:battle_participants(\n              user_id,\n              team\n            )\n          )\n        `).order('created_at', {\n          ascending: false\n        }).limit(limit);\n        if (error) throw error;\n\n        // Filter results where user was a participant\n        const userBattles = (data || []).filter(result => result.match?.participants?.some(p => p.user_id === userId));\n        return userBattles;\n      } catch (error) {\n        console.error('Get battle history error:', error);\n        return [];\n      }\n    },\n    /**\n     * Get battle statistics for a user\n     */\n    async getUserBattleStats(userId) {\n      try {\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.from('profiles').select('battles_won, battles_lost, battles_tied, total_battles').eq('id', userId).single();\n        if (error || !data) {\n          return {\n            total_battles: 0,\n            battles_won: 0,\n            battles_lost: 0,\n            battles_tied: 0,\n            win_rate: 0\n          };\n        }\n        const totalBattles = data.total_battles || 0;\n        const battlesWon = data.battles_won || 0;\n        const winRate = totalBattles > 0 ? battlesWon / totalBattles * 100 : 0;\n        return {\n          total_battles: totalBattles,\n          battles_won: battlesWon,\n          battles_lost: data.battles_lost || 0,\n          battles_tied: data.battles_tied || 0,\n          win_rate: parseFloat(winRate.toFixed(1))\n        };\n      } catch (error) {\n        console.error('Get battle stats error:', error);\n        return {\n          total_battles: 0,\n          battles_won: 0,\n          battles_lost: 0,\n          battles_tied: 0,\n          win_rate: 0\n        };\n      }\n    }\n  };\n});","lineCount":313,"map":[[7,2,31,0,"Object"],[7,8,31,0],[7,9,31,0,"defineProperty"],[7,23,31,0],[7,24,31,0,"exports"],[7,31,31,0],[8,4,31,0,"enumerable"],[8,14,31,0],[9,4,31,0,"get"],[9,7,31,0],[9,18,31,0,"get"],[9,19,31,0],[10,6,31,0],[10,13,31,0,"battleService"],[10,26,31,0],[11,4,31,0],[12,2,31,0],[13,2,1,0],[13,6,1,0,"_libSupabase"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,31,7],[14,8,31,13,"battleService"],[14,21,31,26],[14,24,31,29],[15,4,32,2],[16,0,33,0],[17,0,34,0],[18,4,35,2],[18,10,35,8,"castVote"],[18,18,35,16,"castVote"],[18,19,36,4,"matchId"],[18,26,36,19],[18,28,37,4,"voterId"],[18,35,37,19],[18,37,38,4,"team"],[18,41,38,29],[18,43,39,51],[19,6,40,4],[19,10,40,8],[20,8,41,6],[21,8,42,6],[21,14,42,12],[22,10,42,14,"data"],[22,14,42,18],[22,16,42,20,"existingVote"],[23,8,42,33],[23,9,42,34],[23,12,42,37],[23,18,42,43,"supabase"],[23,30,42,51],[23,31,42,51,"supabase"],[23,39,42,51],[23,40,43,9,"from"],[23,44,43,13],[23,45,43,14],[23,59,43,28],[23,60,43,29],[23,61,44,9,"select"],[23,67,44,15],[23,68,44,16],[23,72,44,20],[23,73,44,21],[23,74,45,9,"eq"],[23,76,45,11],[23,77,45,12],[23,87,45,22],[23,89,45,24,"matchId"],[23,96,45,31],[23,97,45,32],[23,98,46,9,"eq"],[23,100,46,11],[23,101,46,12],[23,111,46,22],[23,113,46,24,"voterId"],[23,120,46,31],[23,121,46,32],[23,122,47,9,"single"],[23,128,47,15],[23,129,47,16],[23,130,47,17],[24,8,49,6],[24,12,49,10,"existingVote"],[24,24,49,22],[24,26,49,24],[25,10,50,8],[26,10,51,8],[26,16,51,14],[27,12,51,16,"error"],[28,10,51,22],[28,11,51,23],[28,14,51,26],[28,20,51,32,"supabase"],[28,32,51,40],[28,33,51,40,"supabase"],[28,41,51,40],[28,42,52,11,"from"],[28,46,52,15],[28,47,52,16],[28,61,52,30],[28,62,52,31],[28,63,53,11,"update"],[28,69,53,17],[28,70,53,18],[29,12,53,20,"team"],[29,16,53,24],[30,12,53,26,"updated_at"],[30,22,53,36],[30,24,53,38],[30,28,53,42,"Date"],[30,32,53,46],[30,33,53,47],[30,34,53,48],[30,35,53,49,"toISOString"],[30,46,53,60],[30,47,53,61],[31,10,53,63],[31,11,53,64],[31,12,53,65],[31,13,54,11,"eq"],[31,15,54,13],[31,16,54,14],[31,20,54,18],[31,22,54,20,"existingVote"],[31,34,54,32],[31,35,54,33,"id"],[31,37,54,35],[31,38,54,36],[32,10,56,8],[32,14,56,12,"error"],[32,19,56,17],[32,21,56,19],[32,27,56,25,"error"],[32,32,56,30],[33,8,57,6],[33,9,57,7],[33,15,57,13],[34,10,58,8],[35,10,59,8],[35,16,59,14],[36,12,59,16,"error"],[37,10,59,22],[37,11,59,23],[37,14,59,26],[37,20,59,32,"supabase"],[37,32,59,40],[37,33,59,40,"supabase"],[37,41,59,40],[37,42,60,11,"from"],[37,46,60,15],[37,47,60,16],[37,61,60,30],[37,62,60,31],[37,63,61,11,"insert"],[37,69,61,17],[37,70,61,18],[38,12,62,12,"match_id"],[38,20,62,20],[38,22,62,22,"matchId"],[38,29,62,29],[39,12,63,12,"voter_id"],[39,20,63,20],[39,22,63,22,"voterId"],[39,29,63,29],[40,12,64,12,"team"],[41,10,65,10],[41,11,65,11],[41,12,65,12],[42,10,67,8],[42,14,67,12,"error"],[42,19,67,17],[42,21,67,19],[42,27,67,25,"error"],[42,32,67,30],[43,8,68,6],[44,8,70,6],[44,15,70,13],[45,10,70,15,"success"],[45,17,70,22],[45,19,70,24],[46,8,70,29],[46,9,70,30],[47,6,71,4],[47,7,71,5],[47,8,71,6],[47,15,71,13,"error"],[47,20,71,23],[47,22,71,25],[48,8,72,6,"console"],[48,15,72,13],[48,16,72,14,"error"],[48,21,72,19],[48,22,72,20],[48,40,72,38],[48,42,72,40,"error"],[48,47,72,45],[48,48,72,46],[49,8,73,6],[49,15,73,13],[50,10,73,15,"success"],[50,17,73,22],[50,19,73,24],[50,24,73,29],[51,10,73,31,"error"],[51,15,73,36],[51,17,73,38,"error"],[51,22,73,43],[51,23,73,44,"message"],[51,30,73,51],[51,34,73,55],[52,8,73,77],[52,9,73,78],[53,6,74,4],[54,4,75,2],[54,5,75,3],[55,4,77,2],[56,0,78,0],[57,0,79,0],[58,4,80,2],[58,10,80,8,"getVoteCounts"],[58,23,80,21,"getVoteCounts"],[58,24,80,22,"matchId"],[58,31,80,37],[58,33,80,59],[59,6,81,4],[59,10,81,8],[60,8,82,6],[60,14,82,12],[61,10,82,14,"data"],[61,14,82,18],[62,10,82,20,"error"],[63,8,82,26],[63,9,82,27],[63,12,82,30],[63,18,82,36,"supabase"],[63,30,82,44],[63,31,82,44,"supabase"],[63,39,82,44],[63,40,83,9,"from"],[63,44,83,13],[63,45,83,14],[63,59,83,28],[63,60,83,29],[63,61,84,9,"select"],[63,67,84,15],[63,68,84,16],[63,74,84,22],[63,75,84,23],[63,76,85,9,"eq"],[63,78,85,11],[63,79,85,12],[63,89,85,22],[63,91,85,24,"matchId"],[63,98,85,31],[63,99,85,32],[64,8,87,6],[64,12,87,10,"error"],[64,17,87,15],[64,19,87,17],[64,25,87,23,"error"],[64,30,87,28],[65,8,89,6],[65,14,89,12,"teamAVotes"],[65,24,89,22],[65,27,89,25,"data"],[65,31,89,29],[65,33,89,31,"filter"],[65,39,89,37],[65,40,89,39,"v"],[65,41,89,40],[65,45,89,45,"v"],[65,46,89,46],[65,47,89,47,"team"],[65,51,89,51],[65,56,89,56],[65,64,89,64],[65,65,89,65],[65,66,89,66,"length"],[65,72,89,72],[65,76,89,76],[65,77,89,77],[66,8,90,6],[66,14,90,12,"teamBVotes"],[66,24,90,22],[66,27,90,25,"data"],[66,31,90,29],[66,33,90,31,"filter"],[66,39,90,37],[66,40,90,39,"v"],[66,41,90,40],[66,45,90,45,"v"],[66,46,90,46],[66,47,90,47,"team"],[66,51,90,51],[66,56,90,56],[66,64,90,64],[66,65,90,65],[66,66,90,66,"length"],[66,72,90,72],[66,76,90,76],[66,77,90,77],[67,8,91,6],[67,14,91,12,"total"],[67,19,91,17],[67,22,91,20,"teamAVotes"],[67,32,91,30],[67,35,91,33,"teamBVotes"],[67,45,91,43],[68,8,93,6],[68,15,93,13],[69,10,94,8,"team_a"],[69,16,94,14],[69,18,94,16,"teamAVotes"],[69,28,94,26],[70,10,95,8,"team_b"],[70,16,95,14],[70,18,95,16,"teamBVotes"],[70,28,95,26],[71,10,96,8,"total"],[71,15,96,13],[72,10,97,8,"percentage"],[72,20,97,18],[72,22,97,20],[73,12,98,10,"team_a"],[73,18,98,16],[73,20,98,18,"total"],[73,25,98,23],[73,28,98,26],[73,29,98,27],[73,32,98,31,"teamAVotes"],[73,42,98,41],[73,45,98,44,"total"],[73,50,98,49],[73,53,98,53],[73,56,98,56],[73,59,98,59],[73,61,98,61],[74,12,99,10,"team_b"],[74,18,99,16],[74,20,99,18,"total"],[74,25,99,23],[74,28,99,26],[74,29,99,27],[74,32,99,31,"teamBVotes"],[74,42,99,41],[74,45,99,44,"total"],[74,50,99,49],[74,53,99,53],[74,56,99,56],[74,59,99,59],[75,10,100,8],[76,8,101,6],[76,9,101,7],[77,6,102,4],[77,7,102,5],[77,8,102,6],[77,15,102,13,"error"],[77,20,102,18],[77,22,102,20],[78,8,103,6,"console"],[78,15,103,13],[78,16,103,14,"error"],[78,21,103,19],[78,22,103,20],[78,46,103,44],[78,48,103,46,"error"],[78,53,103,51],[78,54,103,52],[79,8,104,6],[79,15,104,13],[80,10,105,8,"team_a"],[80,16,105,14],[80,18,105,16],[80,19,105,17],[81,10,106,8,"team_b"],[81,16,106,14],[81,18,106,16],[81,19,106,17],[82,10,107,8,"total"],[82,15,107,13],[82,17,107,15],[82,18,107,16],[83,10,108,8,"percentage"],[83,20,108,18],[83,22,108,20],[84,12,108,22,"team_a"],[84,18,108,28],[84,20,108,30],[84,22,108,32],[85,12,108,34,"team_b"],[85,18,108,40],[85,20,108,42],[86,10,108,45],[87,8,109,6],[87,9,109,7],[88,6,110,4],[89,4,111,2],[89,5,111,3],[90,4,113,2],[91,0,114,0],[92,0,115,0],[93,4,116,2],[93,10,116,8,"getUserVote"],[93,21,116,19,"getUserVote"],[93,22,117,4,"matchId"],[93,29,117,19],[93,31,118,4,"userId"],[93,37,118,18],[93,39,119,41],[94,6,120,4],[94,10,120,8],[95,8,121,6],[95,14,121,12],[96,10,121,14,"data"],[96,14,121,18],[97,10,121,20,"error"],[98,8,121,26],[98,9,121,27],[98,12,121,30],[98,18,121,36,"supabase"],[98,30,121,44],[98,31,121,44,"supabase"],[98,39,121,44],[98,40,122,9,"from"],[98,44,122,13],[98,45,122,14],[98,59,122,28],[98,60,122,29],[98,61,123,9,"select"],[98,67,123,15],[98,68,123,16],[98,74,123,22],[98,75,123,23],[98,76,124,9,"eq"],[98,78,124,11],[98,79,124,12],[98,89,124,22],[98,91,124,24,"matchId"],[98,98,124,31],[98,99,124,32],[98,100,125,9,"eq"],[98,102,125,11],[98,103,125,12],[98,113,125,22],[98,115,125,24,"userId"],[98,121,125,30],[98,122,125,31],[98,123,126,9,"single"],[98,129,126,15],[98,130,126,16],[98,131,126,17],[99,8,128,6],[99,12,128,10,"error"],[99,17,128,15],[99,21,128,19],[99,22,128,20,"data"],[99,26,128,24],[99,28,128,26],[99,35,128,33],[99,39,128,37],[100,8,129,6],[100,15,129,13,"data"],[100,19,129,17],[100,20,129,18,"team"],[100,24,129,22],[101,6,130,4],[101,7,130,5],[101,8,130,6],[101,15,130,13,"error"],[101,20,130,18],[101,22,130,20],[102,8,131,6,"console"],[102,15,131,13],[102,16,131,14,"error"],[102,21,131,19],[102,22,131,20],[102,44,131,42],[102,46,131,44,"error"],[102,51,131,49],[102,52,131,50],[103,8,132,6],[103,15,132,13],[103,19,132,17],[104,6,133,4],[105,4,134,2],[105,5,134,3],[106,4,136,2],[107,0,137,0],[108,0,138,0],[109,4,139,2],[109,10,139,8,"endBattle"],[109,19,139,17,"endBattle"],[109,20,139,18,"matchId"],[109,27,139,33],[109,29,139,89],[110,6,140,4],[110,10,140,8],[111,8,141,6],[112,8,142,6],[112,14,142,12,"voteCounts"],[112,24,142,22],[112,27,142,25],[112,33,142,31],[112,37,142,35],[112,38,142,36,"getVoteCounts"],[112,51,142,49],[112,52,142,50,"matchId"],[112,59,142,57],[112,60,142,58],[114,8,144,6],[115,8,145,6],[115,12,145,10,"winnerTeam"],[115,22,145,49],[116,8,146,6],[116,12,146,10,"voteCounts"],[116,22,146,20],[116,23,146,21,"team_a"],[116,29,146,27],[116,32,146,30,"voteCounts"],[116,42,146,40],[116,43,146,41,"team_b"],[116,49,146,47],[116,51,146,49],[117,10,147,8,"winnerTeam"],[117,20,147,18],[117,23,147,21],[117,31,147,29],[118,8,148,6],[118,9,148,7],[118,15,148,13],[118,19,148,17,"voteCounts"],[118,29,148,27],[118,30,148,28,"team_b"],[118,36,148,34],[118,39,148,37,"voteCounts"],[118,49,148,47],[118,50,148,48,"team_a"],[118,56,148,54],[118,58,148,56],[119,10,149,8,"winnerTeam"],[119,20,149,18],[119,23,149,21],[119,31,149,29],[120,8,150,6],[120,9,150,7],[120,15,150,13],[121,10,151,8,"winnerTeam"],[121,20,151,18],[121,23,151,21],[121,28,151,26],[122,8,152,6],[124,8,154,6],[125,8,155,6],[125,14,155,12],[126,10,155,14,"data"],[126,14,155,18],[127,10,155,20,"error"],[128,8,155,26],[128,9,155,27],[128,12,155,30],[128,18,155,36,"supabase"],[128,30,155,44],[128,31,155,44,"supabase"],[128,39,155,44],[128,40,156,9,"from"],[128,44,156,13],[128,45,156,14],[128,61,156,30],[128,62,156,31],[128,63,157,9,"insert"],[128,69,157,15],[128,70,157,16],[129,10,158,10,"match_id"],[129,18,158,18],[129,20,158,20,"matchId"],[129,27,158,27],[130,10,159,10,"winner_team"],[130,21,159,21],[130,23,159,23,"winnerTeam"],[130,33,159,33],[131,10,160,10,"team_a_votes"],[131,22,160,22],[131,24,160,24,"voteCounts"],[131,34,160,34],[131,35,160,35,"team_a"],[131,41,160,41],[132,10,161,10,"team_b_votes"],[132,22,161,22],[132,24,161,24,"voteCounts"],[132,34,161,34],[132,35,161,35,"team_b"],[132,41,161,41],[133,10,162,10,"total_votes"],[133,21,162,21],[133,23,162,23,"voteCounts"],[133,33,162,33],[133,34,162,34,"total"],[134,8,163,8],[134,9,163,9],[134,10,163,10],[134,11,164,9,"select"],[134,17,164,15],[134,18,164,16],[134,19,164,17],[134,20,165,9,"single"],[134,26,165,15],[134,27,165,16],[134,28,165,17],[135,8,167,6],[135,12,167,10,"error"],[135,17,167,15],[135,19,167,17],[135,25,167,23,"error"],[135,30,167,28],[137,8,169,6],[138,8,170,6],[138,14,170,12,"supabase"],[138,26,170,20],[138,27,170,20,"supabase"],[138,35,170,20],[138,36,171,9,"from"],[138,40,171,13],[138,41,171,14],[138,57,171,30],[138,58,171,31],[138,59,172,9,"update"],[138,65,172,15],[138,66,172,16],[139,10,173,10,"status"],[139,16,173,16],[139,18,173,18],[139,29,173,29],[140,10,174,10,"ended_at"],[140,18,174,18],[140,20,174,20],[140,24,174,24,"Date"],[140,28,174,28],[140,29,174,29],[140,30,174,30],[140,31,174,31,"toISOString"],[140,42,174,42],[140,43,174,43],[141,8,175,8],[141,9,175,9],[141,10,175,10],[141,11,176,9,"eq"],[141,13,176,11],[141,14,176,12],[141,18,176,16],[141,20,176,18,"matchId"],[141,27,176,25],[141,28,176,26],[143,8,178,6],[144,8,179,6],[144,14,179,12],[144,18,179,16],[144,19,179,17,"updateParticipantStats"],[144,41,179,39],[144,42,179,40,"matchId"],[144,49,179,47],[144,51,179,49,"winnerTeam"],[144,61,179,59],[144,62,179,60],[145,8,181,6],[145,15,181,13],[146,10,181,15,"success"],[146,17,181,22],[146,19,181,24],[146,23,181,28],[147,10,181,30,"result"],[147,16,181,36],[147,18,181,38,"data"],[148,8,181,59],[148,9,181,60],[149,6,182,4],[149,7,182,5],[149,8,182,6],[149,15,182,13,"error"],[149,20,182,23],[149,22,182,25],[150,8,183,6,"console"],[150,15,183,13],[150,16,183,14,"error"],[150,21,183,19],[150,22,183,20],[150,41,183,39],[150,43,183,41,"error"],[150,48,183,46],[150,49,183,47],[151,8,184,6],[151,15,184,13],[152,10,184,15,"success"],[152,17,184,22],[152,19,184,24],[153,8,184,30],[153,9,184,31],[154,6,185,4],[155,4,186,2],[155,5,186,3],[156,4,188,2],[157,0,189,0],[158,0,190,0],[159,4,191,2],[159,10,191,8,"getBattleResults"],[159,26,191,24,"getBattleResults"],[159,27,191,25,"matchId"],[159,34,191,40],[159,36,191,72],[160,6,192,4],[160,10,192,8],[161,8,193,6],[161,14,193,12],[162,10,193,14,"data"],[162,14,193,18],[163,10,193,20,"error"],[164,8,193,26],[164,9,193,27],[164,12,193,30],[164,18,193,36,"supabase"],[164,30,193,44],[164,31,193,44,"supabase"],[164,39,193,44],[164,40,194,9,"from"],[164,44,194,13],[164,45,194,14],[164,61,194,30],[164,62,194,31],[164,63,195,9,"select"],[164,69,195,15],[164,70,195,16],[164,73,195,19],[164,74,195,20],[164,75,196,9,"eq"],[164,77,196,11],[164,78,196,12],[164,88,196,22],[164,90,196,24,"matchId"],[164,97,196,31],[164,98,196,32],[164,99,197,9,"single"],[164,105,197,15],[164,106,197,16],[164,107,197,17],[165,8,199,6],[165,12,199,10,"error"],[165,17,199,15],[165,21,199,19],[165,22,199,20,"data"],[165,26,199,24],[165,28,199,26],[165,35,199,33],[165,39,199,37],[166,8,200,6],[166,15,200,13,"data"],[166,19,200,17],[167,6,201,4],[167,7,201,5],[167,8,201,6],[167,15,201,13,"error"],[167,20,201,18],[167,22,201,20],[168,8,202,6,"console"],[168,15,202,13],[168,16,202,14,"error"],[168,21,202,19],[168,22,202,20],[168,49,202,47],[168,51,202,49,"error"],[168,56,202,54],[168,57,202,55],[169,8,203,6],[169,15,203,13],[169,19,203,17],[170,6,204,4],[171,4,205,2],[171,5,205,3],[172,4,207,2],[173,0,208,0],[174,0,209,0],[175,4,210,2],[175,10,210,8,"updateParticipantStats"],[175,32,210,30,"updateParticipantStats"],[175,33,211,4,"matchId"],[175,40,211,19],[175,42,212,4,"winnerTeam"],[175,52,212,43],[175,54,213,19],[176,6,214,4],[176,10,214,8],[177,8,215,6],[178,8,216,6],[178,14,216,12],[179,10,216,14,"data"],[179,14,216,18],[179,16,216,20,"participants"],[180,8,216,33],[180,9,216,34],[180,12,216,37],[180,18,216,43,"supabase"],[180,30,216,51],[180,31,216,51,"supabase"],[180,39,216,51],[180,40,217,9,"from"],[180,44,217,13],[180,45,217,14],[180,66,217,35],[180,67,217,36],[180,68,218,9,"select"],[180,74,218,15],[180,75,218,16],[180,90,218,31],[180,91,218,32],[180,92,219,9,"eq"],[180,94,219,11],[180,95,219,12],[180,105,219,22],[180,107,219,24,"matchId"],[180,114,219,31],[180,115,219,32],[181,8,221,6],[181,12,221,10],[181,13,221,11,"participants"],[181,25,221,23],[181,27,221,25],[183,8,223,6],[184,8,224,6],[184,13,224,11],[184,19,224,17,"participant"],[184,30,224,28],[184,34,224,32,"participants"],[184,46,224,44],[184,48,224,46],[185,10,225,8],[185,16,225,14,"isWinner"],[185,24,225,22],[185,27,226,10,"winnerTeam"],[185,37,226,20],[185,42,226,25,"participant"],[185,53,226,36],[185,54,226,37,"team"],[185,58,226,41],[185,62,227,11,"winnerTeam"],[185,72,227,21],[185,77,227,26],[185,82,227,31],[185,87,227,36,"participant"],[185,98,227,47],[185,99,227,48,"team"],[185,103,227,52],[185,108,227,57],[185,116,227,65],[185,120,227,69,"participant"],[185,131,227,80],[185,132,227,81,"team"],[185,136,227,85],[185,141,227,90],[185,149,227,98],[185,150,227,100],[187,10,229,8],[188,10,230,8],[188,16,230,14],[189,12,230,16,"data"],[189,16,230,20],[189,18,230,22,"profile"],[190,10,230,30],[190,11,230,31],[190,14,230,34],[190,20,230,40,"supabase"],[190,32,230,48],[190,33,230,48,"supabase"],[190,41,230,48],[190,42,231,11,"from"],[190,46,231,15],[190,47,231,16],[190,57,231,26],[190,58,231,27],[190,59,232,11,"select"],[190,65,232,17],[190,66,232,18],[190,122,232,74],[190,123,232,75],[190,124,233,11,"eq"],[190,126,233,13],[190,127,233,14],[190,131,233,18],[190,133,233,20,"participant"],[190,144,233,31],[190,145,233,32,"user_id"],[190,152,233,39],[190,153,233,40],[190,154,234,11,"single"],[190,160,234,17],[190,161,234,18],[190,162,234,19],[191,10,236,8],[191,14,236,12,"profile"],[191,21,236,19],[191,23,236,21],[192,12,237,10],[192,18,237,16,"updates"],[192,25,237,28],[192,28,237,31],[193,14,238,12,"total_battles"],[193,27,238,25],[193,29,238,27],[193,30,238,28,"profile"],[193,37,238,35],[193,38,238,36,"total_battles"],[193,51,238,49],[193,55,238,53],[193,56,238,54],[193,60,238,58],[194,12,239,10],[194,13,239,11],[195,12,241,10],[195,16,241,14,"winnerTeam"],[195,26,241,24],[195,31,241,29],[195,36,241,34],[195,38,241,36],[196,14,242,12,"updates"],[196,21,242,19],[196,22,242,20,"battles_tied"],[196,34,242,32],[196,37,242,35],[196,38,242,36,"profile"],[196,45,242,43],[196,46,242,44,"battles_tied"],[196,58,242,56],[196,62,242,60],[196,63,242,61],[196,67,242,65],[196,68,242,66],[197,12,243,10],[197,13,243,11],[197,19,243,17],[197,23,243,21,"isWinner"],[197,31,243,29],[197,33,243,31],[198,14,244,12,"updates"],[198,21,244,19],[198,22,244,20,"battles_won"],[198,33,244,31],[198,36,244,34],[198,37,244,35,"profile"],[198,44,244,42],[198,45,244,43,"battles_won"],[198,56,244,54],[198,60,244,58],[198,61,244,59],[198,65,244,63],[198,66,244,64],[199,12,245,10],[199,13,245,11],[199,19,245,17],[200,14,246,12,"updates"],[200,21,246,19],[200,22,246,20,"battles_lost"],[200,34,246,32],[200,37,246,35],[200,38,246,36,"profile"],[200,45,246,43],[200,46,246,44,"battles_lost"],[200,58,246,56],[200,62,246,60],[200,63,246,61],[200,67,246,65],[200,68,246,66],[201,12,247,10],[202,12,249,10],[202,18,249,16,"supabase"],[202,30,249,24],[202,31,249,24,"supabase"],[202,39,249,24],[202,40,250,13,"from"],[202,44,250,17],[202,45,250,18],[202,55,250,28],[202,56,250,29],[202,57,251,13,"update"],[202,63,251,19],[202,64,251,20,"updates"],[202,71,251,27],[202,72,251,28],[202,73,252,13,"eq"],[202,75,252,15],[202,76,252,16],[202,80,252,20],[202,82,252,22,"participant"],[202,93,252,33],[202,94,252,34,"user_id"],[202,101,252,41],[202,102,252,42],[203,10,253,8],[204,8,254,6],[205,6,255,4],[205,7,255,5],[205,8,255,6],[205,15,255,13,"error"],[205,20,255,18],[205,22,255,20],[206,8,256,6,"console"],[206,15,256,13],[206,16,256,14,"error"],[206,21,256,19],[206,22,256,20],[206,55,256,53],[206,57,256,55,"error"],[206,62,256,60],[206,63,256,61],[207,6,257,4],[208,4,258,2],[208,5,258,3],[209,4,260,2],[210,0,261,0],[211,0,262,0],[212,4,263,2,"subscribeToVotes"],[212,20,263,18,"subscribeToVotes"],[212,21,264,4,"matchId"],[212,28,264,19],[212,30,265,4,"callback"],[212,38,265,45],[212,40,266,4],[213,6,267,4],[213,12,267,10,"channel"],[213,19,267,17],[213,22,267,20,"supabase"],[213,34,267,28],[213,35,267,28,"supabase"],[213,43,267,28],[213,44,268,7,"channel"],[213,51,268,14],[213,52,268,15],[213,68,268,31,"matchId"],[213,75,268,38],[213,77,268,40],[213,78,268,41],[213,79,269,7,"on"],[213,81,269,9],[213,82,270,8],[213,100,270,26],[213,102,271,8],[214,8,272,10,"event"],[214,13,272,15],[214,15,272,17],[214,18,272,20],[215,8,273,10,"schema"],[215,14,273,16],[215,16,273,18],[215,24,273,26],[216,8,274,10,"table"],[216,13,274,15],[216,15,274,17],[216,29,274,31],[217,8,275,10,"filter"],[217,14,275,16],[217,16,275,18],[217,31,275,33,"matchId"],[217,38,275,40],[218,6,276,8],[218,7,276,9],[218,9,277,8],[218,21,277,20],[219,8,278,10],[220,8,279,10],[220,14,279,16,"counts"],[220,20,279,22],[220,23,279,25],[220,29,279,31],[220,33,279,35],[220,34,279,36,"getVoteCounts"],[220,47,279,49],[220,48,279,50,"matchId"],[220,55,279,57],[220,56,279,58],[221,8,280,10,"callback"],[221,16,280,18],[221,17,280,19,"counts"],[221,23,280,25],[221,24,280,26],[222,6,281,8],[222,7,282,6],[222,8,282,7],[222,9,283,7,"subscribe"],[222,18,283,16],[222,19,283,17],[222,20,283,18],[223,6,285,4],[223,13,285,11],[223,19,285,17],[224,8,286,6,"supabase"],[224,20,286,14],[224,21,286,14,"supabase"],[224,29,286,14],[224,30,286,15,"removeChannel"],[224,43,286,28],[224,44,286,29,"channel"],[224,51,286,36],[224,52,286,37],[225,6,287,4],[225,7,287,5],[226,4,288,2],[226,5,288,3],[227,4,290,2],[228,0,291,0],[229,0,292,0],[230,4,293,2,"subscribeToResult"],[230,21,293,19,"subscribeToResult"],[230,22,294,4,"matchId"],[230,29,294,19],[230,31,295,4,"callback"],[230,39,295,44],[230,41,296,4],[231,6,297,4],[231,12,297,10,"channel"],[231,19,297,17],[231,22,297,20,"supabase"],[231,34,297,28],[231,35,297,28,"supabase"],[231,43,297,28],[231,44,298,7,"channel"],[231,51,298,14],[231,52,298,15],[231,69,298,32,"matchId"],[231,76,298,39],[231,78,298,41],[231,79,298,42],[231,80,299,7,"on"],[231,82,299,9],[231,83,300,8],[231,101,300,26],[231,103,301,8],[232,8,302,10,"event"],[232,13,302,15],[232,15,302,17],[232,23,302,25],[233,8,303,10,"schema"],[233,14,303,16],[233,16,303,18],[233,24,303,26],[234,8,304,10,"table"],[234,13,304,15],[234,15,304,17],[234,31,304,33],[235,8,305,10,"filter"],[235,14,305,16],[235,16,305,18],[235,31,305,33,"matchId"],[235,38,305,40],[236,6,306,8],[236,7,306,9],[236,9,307,9,"payload"],[236,16,307,16],[236,20,307,21],[237,8,308,10,"callback"],[237,16,308,18],[237,17,308,19,"payload"],[237,24,308,26],[237,25,308,27,"new"],[237,28,308,46],[237,29,308,47],[238,6,309,8],[238,7,310,6],[238,8,310,7],[238,9,311,7,"subscribe"],[238,18,311,16],[238,19,311,17],[238,20,311,18],[239,6,313,4],[239,13,313,11],[239,19,313,17],[240,8,314,6,"supabase"],[240,20,314,14],[240,21,314,14,"supabase"],[240,29,314,14],[240,30,314,15,"removeChannel"],[240,43,314,28],[240,44,314,29,"channel"],[240,51,314,36],[240,52,314,37],[241,6,315,4],[241,7,315,5],[242,4,316,2],[242,5,316,3],[243,4,318,2],[244,0,319,0],[245,0,320,0],[246,4,321,2],[246,10,321,8,"getUserBattleHistory"],[246,30,321,28,"getUserBattleHistory"],[246,31,322,4,"userId"],[246,37,322,18],[246,39,323,4,"limit"],[246,44,323,9],[246,47,323,12],[246,49,323,14],[246,51,324,29],[247,6,325,4],[247,10,325,8],[248,8,326,6],[248,14,326,12],[249,10,326,14,"data"],[249,14,326,18],[250,10,326,20,"error"],[251,8,326,26],[251,9,326,27],[251,12,326,30],[251,18,326,36,"supabase"],[251,30,326,44],[251,31,326,44,"supabase"],[251,39,326,44],[251,40,327,9,"from"],[251,44,327,13],[251,45,327,14],[251,61,327,30],[251,62,327,31],[251,63,328,9,"select"],[251,69,328,15],[251,70,328,16],[252,0,329,0],[253,0,330,0],[254,0,331,0],[255,0,332,0],[256,0,333,0],[257,0,334,0],[258,0,335,0],[259,0,336,0],[260,0,337,0],[260,9,337,9],[260,10,337,10],[260,11,338,9,"order"],[260,16,338,14],[260,17,338,15],[260,29,338,27],[260,31,338,29],[261,10,338,31,"ascending"],[261,19,338,40],[261,21,338,42],[262,8,338,48],[262,9,338,49],[262,10,338,50],[262,11,339,9,"limit"],[262,16,339,14],[262,17,339,15,"limit"],[262,22,339,20],[262,23,339,21],[263,8,341,6],[263,12,341,10,"error"],[263,17,341,15],[263,19,341,17],[263,25,341,23,"error"],[263,30,341,28],[265,8,343,6],[266,8,344,6],[266,14,344,12,"userBattles"],[266,25,344,23],[266,28,344,26],[266,29,344,27,"data"],[266,33,344,31],[266,37,344,35],[266,39,344,37],[266,41,344,39,"filter"],[266,47,344,45],[266,48,344,47,"result"],[266,54,344,58],[266,58,345,8,"result"],[266,64,345,14],[266,65,345,15,"match"],[266,70,345,20],[266,72,345,22,"participants"],[266,84,345,34],[266,86,345,36,"some"],[266,90,345,40],[266,91,345,42,"p"],[266,92,345,48],[266,96,345,53,"p"],[266,97,345,54],[266,98,345,55,"user_id"],[266,105,345,62],[266,110,345,67,"userId"],[266,116,345,73],[266,117,346,6],[266,118,346,7],[267,8,348,6],[267,15,348,13,"userBattles"],[267,26,348,24],[268,6,349,4],[268,7,349,5],[268,8,349,6],[268,15,349,13,"error"],[268,20,349,18],[268,22,349,20],[269,8,350,6,"console"],[269,15,350,13],[269,16,350,14,"error"],[269,21,350,19],[269,22,350,20],[269,49,350,47],[269,51,350,49,"error"],[269,56,350,54],[269,57,350,55],[270,8,351,6],[270,15,351,13],[270,17,351,15],[271,6,352,4],[272,4,353,2],[272,5,353,3],[273,4,355,2],[274,0,356,0],[275,0,357,0],[276,4,358,2],[276,10,358,8,"getUserBattleStats"],[276,28,358,26,"getUserBattleStats"],[276,29,358,27,"userId"],[276,35,358,41],[276,37,364,5],[277,6,365,4],[277,10,365,8],[278,8,366,6],[278,14,366,12],[279,10,366,14,"data"],[279,14,366,18],[280,10,366,20,"error"],[281,8,366,26],[281,9,366,27],[281,12,366,30],[281,18,366,36,"supabase"],[281,30,366,44],[281,31,366,44,"supabase"],[281,39,366,44],[281,40,367,9,"from"],[281,44,367,13],[281,45,367,14],[281,55,367,24],[281,56,367,25],[281,57,368,9,"select"],[281,63,368,15],[281,64,368,16],[281,120,368,72],[281,121,368,73],[281,122,369,9,"eq"],[281,124,369,11],[281,125,369,12],[281,129,369,16],[281,131,369,18,"userId"],[281,137,369,24],[281,138,369,25],[281,139,370,9,"single"],[281,145,370,15],[281,146,370,16],[281,147,370,17],[282,8,372,6],[282,12,372,10,"error"],[282,17,372,15],[282,21,372,19],[282,22,372,20,"data"],[282,26,372,24],[282,28,372,26],[283,10,373,8],[283,17,373,15],[284,12,374,10,"total_battles"],[284,25,374,23],[284,27,374,25],[284,28,374,26],[285,12,375,10,"battles_won"],[285,23,375,21],[285,25,375,23],[285,26,375,24],[286,12,376,10,"battles_lost"],[286,24,376,22],[286,26,376,24],[286,27,376,25],[287,12,377,10,"battles_tied"],[287,24,377,22],[287,26,377,24],[287,27,377,25],[288,12,378,10,"win_rate"],[288,20,378,18],[288,22,378,20],[289,10,379,8],[289,11,379,9],[290,8,380,6],[291,8,382,6],[291,14,382,12,"totalBattles"],[291,26,382,24],[291,29,382,27,"data"],[291,33,382,31],[291,34,382,32,"total_battles"],[291,47,382,45],[291,51,382,49],[291,52,382,50],[292,8,383,6],[292,14,383,12,"battlesWon"],[292,24,383,22],[292,27,383,25,"data"],[292,31,383,29],[292,32,383,30,"battles_won"],[292,43,383,41],[292,47,383,45],[292,48,383,46],[293,8,384,6],[293,14,384,12,"winRate"],[293,21,384,19],[293,24,384,22,"totalBattles"],[293,36,384,34],[293,39,384,37],[293,40,384,38],[293,43,384,42,"battlesWon"],[293,53,384,52],[293,56,384,55,"totalBattles"],[293,68,384,67],[293,71,384,71],[293,74,384,74],[293,77,384,77],[293,78,384,78],[294,8,386,6],[294,15,386,13],[295,10,387,8,"total_battles"],[295,23,387,21],[295,25,387,23,"totalBattles"],[295,37,387,35],[296,10,388,8,"battles_won"],[296,21,388,19],[296,23,388,21,"battlesWon"],[296,33,388,31],[297,10,389,8,"battles_lost"],[297,22,389,20],[297,24,389,22,"data"],[297,28,389,26],[297,29,389,27,"battles_lost"],[297,41,389,39],[297,45,389,43],[297,46,389,44],[298,10,390,8,"battles_tied"],[298,22,390,20],[298,24,390,22,"data"],[298,28,390,26],[298,29,390,27,"battles_tied"],[298,41,390,39],[298,45,390,43],[298,46,390,44],[299,10,391,8,"win_rate"],[299,18,391,16],[299,20,391,18,"parseFloat"],[299,30,391,28],[299,31,391,29,"winRate"],[299,38,391,36],[299,39,391,37,"toFixed"],[299,46,391,44],[299,47,391,45],[299,48,391,46],[299,49,391,47],[300,8,392,6],[300,9,392,7],[301,6,393,4],[301,7,393,5],[301,8,393,6],[301,15,393,13,"error"],[301,20,393,18],[301,22,393,20],[302,8,394,6,"console"],[302,15,394,13],[302,16,394,14,"error"],[302,21,394,19],[302,22,394,20],[302,47,394,45],[302,49,394,47,"error"],[302,54,394,52],[302,55,394,53],[303,8,395,6],[303,15,395,13],[304,10,396,8,"total_battles"],[304,23,396,21],[304,25,396,23],[304,26,396,24],[305,10,397,8,"battles_won"],[305,21,397,19],[305,23,397,21],[305,24,397,22],[306,10,398,8,"battles_lost"],[306,22,398,20],[306,24,398,22],[306,25,398,23],[307,10,399,8,"battles_tied"],[307,22,399,20],[307,24,399,22],[307,25,399,23],[308,10,400,8,"win_rate"],[308,18,400,16],[308,20,400,18],[309,8,401,6],[309,9,401,7],[310,6,402,4],[311,4,403,2],[312,2,404,0],[312,3,404,1],[313,0,404,2],[313,3]],"functionMap":{"names":["<global>","castVote","getVoteCounts","data.filter$argument_0","getUserVote","endBattle","getBattleResults","updateParticipantStats","subscribeToVotes","supabase.channel.on$argument_2","<anonymous>","subscribeToResult","getUserBattleHistory","filter$argument_0","result.match.participants.some$argument_0","getUserBattleStats"],"mappings":"AAA;ECkC;GDwC;EEK;sCCS,0BD;sCCC,0BD;GFqB;EIK;GJkB;EKK;GL+C;EMK;GNc;EOK;GPgD;EQK;QCc;SDI;WEI;KFE;GRC;EWK;QFc;SEE;WDI;KCE;GXC;EYK;8CCuB;yCCC,gCD,CD;GZQ;EeK;Gf6C"},"hasCjsExports":false},"type":"js/module"}]}