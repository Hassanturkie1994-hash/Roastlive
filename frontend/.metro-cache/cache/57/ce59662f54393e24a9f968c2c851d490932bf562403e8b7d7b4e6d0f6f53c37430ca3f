{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"../lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"phU7YuntQKgoAYKWKHVlsIL7LCY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"postsService\", {\n    enumerable: true,\n    get: function () {\n      return postsService;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _libSupabase = require(_dependencyMap[1], \"../lib/supabase\");\n  var postsService = {\n    // Create post\n    createPost(userId, caption, mediaUrl, mediaType) {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          var postData = {\n            user_id: userId,\n            caption\n          };\n          if (mediaUrl) {\n            if (mediaType === 'video') {\n              postData.video_url = mediaUrl;\n            } else {\n              postData.image_url = mediaUrl;\n            }\n          }\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('posts').insert(postData).select().single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return {\n            success: true,\n            postId: data.id\n          };\n        } catch (error) {\n          console.error('Create post error:', error);\n          return {\n            success: false,\n            error: error.message\n          };\n        }\n      })();\n    },\n    // Get posts for user\n    getUserPosts(userId) {\n      return (0, _asyncToGenerator.default)(function* () {\n        var _yield$supabase$from$2 = yield _libSupabase.supabase.from('posts').select('*').eq('user_id', userId).order('created_at', {\n            ascending: false\n          }),\n          data = _yield$supabase$from$2.data,\n          error = _yield$supabase$from$2.error;\n        if (error) {\n          console.error('Get user posts error:', error);\n          return [];\n        }\n        return data || [];\n      })();\n    },\n    // Get feed posts (following)\n    getFeedPosts(userId) {\n      return (0, _asyncToGenerator.default)(function* () {\n        var _yield$supabase$from$3 = yield _libSupabase.supabase.from('posts').select(`\n        *,\n        profiles:user_id (username, avatar_url)\n      `).order('created_at', {\n            ascending: false\n          }).limit(50),\n          data = _yield$supabase$from$3.data,\n          error = _yield$supabase$from$3.error;\n        if (error) {\n          console.error('Get feed posts error:', error);\n          return [];\n        }\n        return data || [];\n      })();\n    },\n    // Like post\n    likePost(postId, userId) {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          var _yield$supabase$from$4 = yield _libSupabase.supabase.from('post_likes').insert({\n              post_id: postId,\n              user_id: userId\n            }),\n            error = _yield$supabase$from$4.error;\n          if (error) throw error;\n\n          // Increment likes count\n          yield _libSupabase.supabase.rpc('increment_post_likes', {\n            post_id: postId\n          });\n          return true;\n        } catch (error) {\n          console.error('Like post error:', error);\n          return false;\n        }\n      })();\n    },\n    // Unlike post\n    unlikePost(postId, userId) {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          yield _libSupabase.supabase.from('post_likes').delete().eq('post_id', postId).eq('user_id', userId);\n\n          // Decrement likes count\n          yield _libSupabase.supabase.rpc('decrement_post_likes', {\n            post_id: postId\n          });\n          return true;\n        } catch (error) {\n          console.error('Unlike post error:', error);\n          return false;\n        }\n      })();\n    },\n    // Add comment\n    addComment(postId, userId, content) {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          var _yield$supabase$from$5 = yield _libSupabase.supabase.from('post_comments').insert({\n              post_id: postId,\n              user_id: userId,\n              content\n            }),\n            error = _yield$supabase$from$5.error;\n          if (error) throw error;\n\n          // Increment comments count\n          yield _libSupabase.supabase.rpc('increment_post_comments', {\n            post_id: postId\n          });\n          return true;\n        } catch (error) {\n          console.error('Add comment error:', error);\n          return false;\n        }\n      })();\n    }\n  };\n});","lineCount":150,"map":[[12,2,22,0,"Object"],[12,8,22,0],[12,9,22,0,"defineProperty"],[12,23,22,0],[12,24,22,0,"exports"],[12,31,22,0],[13,4,22,0,"enumerable"],[13,14,22,0],[14,4,22,0,"get"],[14,7,22,0],[14,18,22,0,"get"],[14,19,22,0],[15,6,22,0],[15,13,22,0,"postsService"],[15,25,22,0],[16,4,22,0],[17,2,22,0],[18,2,143,2],[18,6,143,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,143,2],[18,45,143,2,"require"],[18,52,143,2],[18,53,143,2,"_dependencyMap"],[18,67,143,2],[19,2,143,2],[19,6,143,2,"_asyncToGenerator"],[19,23,143,2],[19,26,143,2,"_interopDefault"],[19,41,143,2],[19,42,143,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,143,2],[20,2,1,0],[20,6,1,0,"_libSupabase"],[20,18,1,0],[20,21,1,0,"require"],[20,28,1,0],[20,29,1,0,"_dependencyMap"],[20,43,1,0],[21,2,22,7],[21,6,22,13,"postsService"],[21,18,22,25],[21,21,22,28],[22,4,23,2],[23,4,24,8,"createPost"],[23,14,24,18,"createPost"],[23,15,24,19,"userId"],[23,21,24,33],[23,23,24,35,"caption"],[23,30,24,51],[23,32,24,53,"mediaUrl"],[23,40,24,70],[23,42,24,72,"mediaType"],[23,51,24,101],[23,53,24,167],[24,6,24,167],[24,17,24,167,"_asyncToGenerator"],[24,34,24,167],[24,35,24,167,"default"],[24,42,24,167],[25,8,25,4],[25,12,25,8],[26,10,26,6],[26,14,26,12,"postData"],[26,22,26,25],[26,25,26,28],[27,12,27,8,"user_id"],[27,19,27,15],[27,21,27,17,"userId"],[27,27,27,23],[28,12,28,8,"caption"],[29,10,29,6],[29,11,29,7],[30,10,31,6],[30,14,31,10,"mediaUrl"],[30,22,31,18],[30,24,31,20],[31,12,32,8],[31,16,32,12,"mediaType"],[31,25,32,21],[31,30,32,26],[31,37,32,33],[31,39,32,35],[32,14,33,10,"postData"],[32,22,33,18],[32,23,33,19,"video_url"],[32,32,33,28],[32,35,33,31,"mediaUrl"],[32,43,33,39],[33,12,34,8],[33,13,34,9],[33,19,34,15],[34,14,35,10,"postData"],[34,22,35,18],[34,23,35,19,"image_url"],[34,32,35,28],[34,35,35,31,"mediaUrl"],[34,43,35,39],[35,12,36,8],[36,10,37,6],[37,10,39,6],[37,14,39,6,"_yield$supabase$from$"],[37,35,39,6],[37,44,39,36,"supabase"],[37,56,39,44],[37,57,39,44,"supabase"],[37,65,39,44],[37,66,40,9,"from"],[37,70,40,13],[37,71,40,14],[37,78,40,21],[37,79,40,22],[37,80,41,9,"insert"],[37,86,41,15],[37,87,41,16,"postData"],[37,95,41,24],[37,96,41,25],[37,97,42,9,"select"],[37,103,42,15],[37,104,42,16],[37,105,42,17],[37,106,43,9,"single"],[37,112,43,15],[37,113,43,16],[37,114,43,17],[38,12,39,14,"data"],[38,16,39,18],[38,19,39,18,"_yield$supabase$from$"],[38,40,39,18],[38,41,39,14,"data"],[38,45,39,18],[39,12,39,20,"error"],[39,17,39,25],[39,20,39,25,"_yield$supabase$from$"],[39,41,39,25],[39,42,39,20,"error"],[39,47,39,25],[40,10,45,6],[40,14,45,10,"error"],[40,19,45,15],[40,21,45,17],[40,27,45,23,"error"],[40,32,45,28],[41,10,47,6],[41,17,47,13],[42,12,47,15,"success"],[42,19,47,22],[42,21,47,24],[42,25,47,28],[43,12,47,30,"postId"],[43,18,47,36],[43,20,47,38,"data"],[43,24,47,42],[43,25,47,43,"id"],[44,10,47,46],[44,11,47,47],[45,8,48,4],[45,9,48,5],[45,10,48,6],[45,17,48,13,"error"],[45,22,48,23],[45,24,48,25],[46,10,49,6,"console"],[46,17,49,13],[46,18,49,14,"error"],[46,23,49,19],[46,24,49,20],[46,44,49,40],[46,46,49,42,"error"],[46,51,49,47],[46,52,49,48],[47,10,50,6],[47,17,50,13],[48,12,50,15,"success"],[48,19,50,22],[48,21,50,24],[48,26,50,29],[49,12,50,31,"error"],[49,17,50,36],[49,19,50,38,"error"],[49,24,50,43],[49,25,50,44,"message"],[50,10,50,52],[50,11,50,53],[51,8,51,4],[52,6,51,5],[53,4,52,2],[53,5,52,3],[54,4,54,2],[55,4,55,8,"getUserPosts"],[55,16,55,20,"getUserPosts"],[55,17,55,21,"userId"],[55,23,55,35],[55,25,55,54],[56,6,55,54],[56,17,55,54,"_asyncToGenerator"],[56,34,55,54],[56,35,55,54,"default"],[56,42,55,54],[57,8,56,4],[57,12,56,4,"_yield$supabase$from$2"],[57,34,56,4],[57,43,56,34,"supabase"],[57,55,56,42],[57,56,56,42,"supabase"],[57,64,56,42],[57,65,57,7,"from"],[57,69,57,11],[57,70,57,12],[57,77,57,19],[57,78,57,20],[57,79,58,7,"select"],[57,85,58,13],[57,86,58,14],[57,89,58,17],[57,90,58,18],[57,91,59,7,"eq"],[57,93,59,9],[57,94,59,10],[57,103,59,19],[57,105,59,21,"userId"],[57,111,59,27],[57,112,59,28],[57,113,60,7,"order"],[57,118,60,12],[57,119,60,13],[57,131,60,25],[57,133,60,27],[58,12,60,29,"ascending"],[58,21,60,38],[58,23,60,40],[59,10,60,46],[59,11,60,47],[59,12,60,48],[60,10,56,12,"data"],[60,14,56,16],[60,17,56,16,"_yield$supabase$from$2"],[60,39,56,16],[60,40,56,12,"data"],[60,44,56,16],[61,10,56,18,"error"],[61,15,56,23],[61,18,56,23,"_yield$supabase$from$2"],[61,40,56,23],[61,41,56,18,"error"],[61,46,56,23],[62,8,62,4],[62,12,62,8,"error"],[62,17,62,13],[62,19,62,15],[63,10,63,6,"console"],[63,17,63,13],[63,18,63,14,"error"],[63,23,63,19],[63,24,63,20],[63,47,63,43],[63,49,63,45,"error"],[63,54,63,50],[63,55,63,51],[64,10,64,6],[64,17,64,13],[64,19,64,15],[65,8,65,4],[66,8,66,4],[66,15,66,11,"data"],[66,19,66,15],[66,23,66,19],[66,25,66,21],[67,6,66,22],[68,4,67,2],[68,5,67,3],[69,4,69,2],[70,4,70,8,"getFeedPosts"],[70,16,70,20,"getFeedPosts"],[70,17,70,21,"userId"],[70,23,70,35],[70,25,70,54],[71,6,70,54],[71,17,70,54,"_asyncToGenerator"],[71,34,70,54],[71,35,70,54,"default"],[71,42,70,54],[72,8,71,4],[72,12,71,4,"_yield$supabase$from$3"],[72,34,71,4],[72,43,71,34,"supabase"],[72,55,71,42],[72,56,71,42,"supabase"],[72,64,71,42],[72,65,72,7,"from"],[72,69,72,11],[72,70,72,12],[72,77,72,19],[72,78,72,20],[72,79,73,7,"select"],[72,85,73,13],[72,86,73,14],[73,0,74,0],[74,0,75,0],[75,0,76,0],[75,7,76,7],[75,8,76,8],[75,9,77,7,"order"],[75,14,77,12],[75,15,77,13],[75,27,77,25],[75,29,77,27],[76,12,77,29,"ascending"],[76,21,77,38],[76,23,77,40],[77,10,77,46],[77,11,77,47],[77,12,77,48],[77,13,78,7,"limit"],[77,18,78,12],[77,19,78,13],[77,21,78,15],[77,22,78,16],[78,10,71,12,"data"],[78,14,71,16],[78,17,71,16,"_yield$supabase$from$3"],[78,39,71,16],[78,40,71,12,"data"],[78,44,71,16],[79,10,71,18,"error"],[79,15,71,23],[79,18,71,23,"_yield$supabase$from$3"],[79,40,71,23],[79,41,71,18,"error"],[79,46,71,23],[80,8,80,4],[80,12,80,8,"error"],[80,17,80,13],[80,19,80,15],[81,10,81,6,"console"],[81,17,81,13],[81,18,81,14,"error"],[81,23,81,19],[81,24,81,20],[81,47,81,43],[81,49,81,45,"error"],[81,54,81,50],[81,55,81,51],[82,10,82,6],[82,17,82,13],[82,19,82,15],[83,8,83,4],[84,8,84,4],[84,15,84,11,"data"],[84,19,84,15],[84,23,84,19],[84,25,84,21],[85,6,84,22],[86,4,85,2],[86,5,85,3],[87,4,87,2],[88,4,88,8,"likePost"],[88,12,88,16,"likePost"],[88,13,88,17,"postId"],[88,19,88,31],[88,21,88,33,"userId"],[88,27,88,47],[88,29,88,67],[89,6,88,67],[89,17,88,67,"_asyncToGenerator"],[89,34,88,67],[89,35,88,67,"default"],[89,42,88,67],[90,8,89,4],[90,12,89,8],[91,10,90,6],[91,14,90,6,"_yield$supabase$from$4"],[91,36,90,6],[91,45,90,30,"supabase"],[91,57,90,38],[91,58,90,38,"supabase"],[91,66,90,38],[91,67,91,9,"from"],[91,71,91,13],[91,72,91,14],[91,84,91,26],[91,85,91,27],[91,86,92,9,"insert"],[91,92,92,15],[91,93,92,16],[92,14,92,18,"post_id"],[92,21,92,25],[92,23,92,27,"postId"],[92,29,92,33],[93,14,92,35,"user_id"],[93,21,92,42],[93,23,92,44,"userId"],[94,12,92,51],[94,13,92,52],[94,14,92,53],[95,12,90,14,"error"],[95,17,90,19],[95,20,90,19,"_yield$supabase$from$4"],[95,42,90,19],[95,43,90,14,"error"],[95,48,90,19],[96,10,94,6],[96,14,94,10,"error"],[96,19,94,15],[96,21,94,17],[96,27,94,23,"error"],[96,32,94,28],[98,10,96,6],[99,10,97,6],[99,16,97,12,"supabase"],[99,28,97,20],[99,29,97,20,"supabase"],[99,37,97,20],[99,38,97,21,"rpc"],[99,41,97,24],[99,42,97,25],[99,64,97,47],[99,66,97,49],[100,12,97,51,"post_id"],[100,19,97,58],[100,21,97,60,"postId"],[101,10,97,67],[101,11,97,68],[101,12,97,69],[102,10,99,6],[102,17,99,13],[102,21,99,17],[103,8,100,4],[103,9,100,5],[103,10,100,6],[103,17,100,13,"error"],[103,22,100,18],[103,24,100,20],[104,10,101,6,"console"],[104,17,101,13],[104,18,101,14,"error"],[104,23,101,19],[104,24,101,20],[104,42,101,38],[104,44,101,40,"error"],[104,49,101,45],[104,50,101,46],[105,10,102,6],[105,17,102,13],[105,22,102,18],[106,8,103,4],[107,6,103,5],[108,4,104,2],[108,5,104,3],[109,4,106,2],[110,4,107,8,"unlikePost"],[110,14,107,18,"unlikePost"],[110,15,107,19,"postId"],[110,21,107,33],[110,23,107,35,"userId"],[110,29,107,49],[110,31,107,69],[111,6,107,69],[111,17,107,69,"_asyncToGenerator"],[111,34,107,69],[111,35,107,69,"default"],[111,42,107,69],[112,8,108,4],[112,12,108,8],[113,10,109,6],[113,16,109,12,"supabase"],[113,28,109,20],[113,29,109,20,"supabase"],[113,37,109,20],[113,38,110,9,"from"],[113,42,110,13],[113,43,110,14],[113,55,110,26],[113,56,110,27],[113,57,111,9,"delete"],[113,63,111,15],[113,64,111,16],[113,65,111,17],[113,66,112,9,"eq"],[113,68,112,11],[113,69,112,12],[113,78,112,21],[113,80,112,23,"postId"],[113,86,112,29],[113,87,112,30],[113,88,113,9,"eq"],[113,90,113,11],[113,91,113,12],[113,100,113,21],[113,102,113,23,"userId"],[113,108,113,29],[113,109,113,30],[115,10,115,6],[116,10,116,6],[116,16,116,12,"supabase"],[116,28,116,20],[116,29,116,20,"supabase"],[116,37,116,20],[116,38,116,21,"rpc"],[116,41,116,24],[116,42,116,25],[116,64,116,47],[116,66,116,49],[117,12,116,51,"post_id"],[117,19,116,58],[117,21,116,60,"postId"],[118,10,116,67],[118,11,116,68],[118,12,116,69],[119,10,118,6],[119,17,118,13],[119,21,118,17],[120,8,119,4],[120,9,119,5],[120,10,119,6],[120,17,119,13,"error"],[120,22,119,18],[120,24,119,20],[121,10,120,6,"console"],[121,17,120,13],[121,18,120,14,"error"],[121,23,120,19],[121,24,120,20],[121,44,120,40],[121,46,120,42,"error"],[121,51,120,47],[121,52,120,48],[122,10,121,6],[122,17,121,13],[122,22,121,18],[123,8,122,4],[124,6,122,5],[125,4,123,2],[125,5,123,3],[126,4,125,2],[127,4,126,8,"addComment"],[127,14,126,18,"addComment"],[127,15,126,19,"postId"],[127,21,126,33],[127,23,126,35,"userId"],[127,29,126,49],[127,31,126,51,"content"],[127,38,126,66],[127,40,126,86],[128,6,126,86],[128,17,126,86,"_asyncToGenerator"],[128,34,126,86],[128,35,126,86,"default"],[128,42,126,86],[129,8,127,4],[129,12,127,8],[130,10,128,6],[130,14,128,6,"_yield$supabase$from$5"],[130,36,128,6],[130,45,128,30,"supabase"],[130,57,128,38],[130,58,128,38,"supabase"],[130,66,128,38],[130,67,129,9,"from"],[130,71,129,13],[130,72,129,14],[130,87,129,29],[130,88,129,30],[130,89,130,9,"insert"],[130,95,130,15],[130,96,130,16],[131,14,130,18,"post_id"],[131,21,130,25],[131,23,130,27,"postId"],[131,29,130,33],[132,14,130,35,"user_id"],[132,21,130,42],[132,23,130,44,"userId"],[132,29,130,50],[133,14,130,52,"content"],[134,12,130,60],[134,13,130,61],[134,14,130,62],[135,12,128,14,"error"],[135,17,128,19],[135,20,128,19,"_yield$supabase$from$5"],[135,42,128,19],[135,43,128,14,"error"],[135,48,128,19],[136,10,132,6],[136,14,132,10,"error"],[136,19,132,15],[136,21,132,17],[136,27,132,23,"error"],[136,32,132,28],[138,10,134,6],[139,10,135,6],[139,16,135,12,"supabase"],[139,28,135,20],[139,29,135,20,"supabase"],[139,37,135,20],[139,38,135,21,"rpc"],[139,41,135,24],[139,42,135,25],[139,67,135,50],[139,69,135,52],[140,12,135,54,"post_id"],[140,19,135,61],[140,21,135,63,"postId"],[141,10,135,70],[141,11,135,71],[141,12,135,72],[142,10,137,6],[142,17,137,13],[142,21,137,17],[143,8,138,4],[143,9,138,5],[143,10,138,6],[143,17,138,13,"error"],[143,22,138,18],[143,24,138,20],[144,10,139,6,"console"],[144,17,139,13],[144,18,139,14,"error"],[144,23,139,19],[144,24,139,20],[144,44,139,40],[144,46,139,42,"error"],[144,51,139,47],[144,52,139,48],[145,10,140,6],[145,17,140,13],[145,22,140,18],[146,8,141,4],[147,6,141,5],[148,4,142,2],[149,2,143,0],[149,3,143,1],[150,0,143,2],[150,3]],"functionMap":{"names":["<global>","createPost","getUserPosts","getFeedPosts","likePost","unlikePost","addComment"],"mappings":"AAA;ECuB;GD4B;EEG;GFY;EGG;GHe;EIG;GJgB;EKG;GLgB;EMG;GNgB"},"hasCjsExports":false},"type":"js/module"}]}